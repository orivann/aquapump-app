global:
  imagePullSecrets:
    - name: ecr-creds

image:
  registry: 043309328819.dkr.ecr.eu-central-1.amazonaws.com
  tag: ""
  backend:
    repository: aquapump/backend
    tag: ""
  frontend:
    repository: aquapump/frontend
    tag: ""

backend:
  replicaCount: 2
  image:
    pullPolicy: IfNotPresent
  service:
    type: ClusterIP
    port: 8000
  secretName: aquapump-backend
  env: {}
  envFrom: []
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi

frontend:
  replicaCount: 2
  image:
    pullPolicy: IfNotPresent
  service:
    type: ClusterIP
    port: 80
  secretName: aquapump-frontend
  env:
    VITE_REACT_APP_API_BASE: "https://aqua-pump.net/api"
    VITE_PUBLIC_SITE_ORIGIN: "https://aqua-pump.net"
  envFrom: []
  resources:
    requests:
      cpu: 50m
      memory: 128Mi
    limits:
      cpu: 200m
      memory: 256Mi

ingress:
  enabled: true
  className: nginx
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-production
    nginx.ingress.kubernetes.io/backend-protocol: HTTP
    nginx.ingress.kubernetes.io/proxy-read-timeout: "120"
    nginx.ingress.kubernetes.io/proxy-send-timeout: "120"
  hosts:
    - host: aqua-pump.net
      paths:
        - path: /
          pathType: Prefix
          service:
            name: frontend
            port: 80
        - path: /api
          pathType: Prefix
          service:
            name: backend
            port: 8000
  tls:
    - hosts:
        - aqua-pump.net
      secretName: aquapump-tls

externalSecrets:
  enabled: true
  secretStoreRef:
    name: aws-secrets
    kind: ClusterSecretStore
  backend:
    name: aquapump-backend
    refreshInterval: 1h
    data: []
  frontend:
    name: aquapump-frontend
    refreshInterval: 1h
    data: []
